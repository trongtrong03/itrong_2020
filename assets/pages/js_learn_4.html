<!DOCTYPE html>
<html class="page">
@@include("../_head.html")
<body>
    <article id="wrap">
        @@include("../_header.html", { "js": "active" })
        <main>
            <section class="text-wrap">
                <hgroup class="text-head">
                    <h1 v-text="getJsIndex({ j_list, index: j_list.length-4 }).title"></h1>
                    <h6 class="notes-tags">
                        <time class="notes-time" v-text="getJsIndex({ j_list, index: j_list.length-4 }).time"></time>
                    </h6>
                </hgroup>
                <div class="text-content">
<!-- Content start -->
<h2>前言</h2>
<p>函數（Function），亦有人稱之為函式，是構成 Javascript 的基本要素之一，它將一系列的敘述句組合起來，以執行一項特定的工作。本篇主題將介紹其基本運用及用法。</p>
<p><br></p>

<!-- 大綱 -->
<div class="text-catalog">
    <ul>
        <li><a href="#act1">函數是什麼</a></li>
        <li><a href="#act2">函數結構與呼叫</a></li>
        <li><a href="#act3">函數的回傳值──return</a></li>
        <li><a href="#act4">匿名函數</a></li>
    </ul>
</div>

<h2 id="act1">函數是什麼</h2>
<p>在哲宇老師的 JavaScript 教程曾經說過，程式開發者寫程式時應該避免以下三件事情：重複相同程式碼、無規劃/命名陳述目的、無法重複使用。這些不好的撰寫方式都會導致程式執行效率不佳或帶來維護不易的麻煩，舉例來說：</p>
<figure>
    <img src="@@webRoot/images/js/learn-function-1.jpg">
</figure>
<p>上方的範例示意圖裡存在三塊相同的重複程式碼（黑色區塊），當有一天需要針對某部份進行修改時，就得重複三次相同的作業流程。如果只有寥寥數行可能不覺得有什麼，假如修改範圍多達數十行，又或者其重複使用的地方很多，勢必需要投注大量的時間成本在同樣的事情上。然而，如果我們能將這些重複的程式碼「獨立」出來，使其可以被統一集中管理，並使其模組化，那麼就可以避免重複編寫一樣的程式，同時又可以在不同的程式碼功能重複呼叫它，大幅度增加程式的效能與易讀性。實現此一理想的方法，JavaScript 稱之為「函數」。</p>
<figure>
    <img src="@@webRoot/images/js/learn-function-2.jpg">
    <figcaption>利用函數來處理重複使用的程式碼。</figcaption>
</figure>
<p><br></p>

<h2 id="act2">函數結構與呼叫</h2>
<p>函數的關鍵字為 <em>function</em>，以下是宣告一個函數的基本架構圖：</p>
<figure>
    <img src="@@webRoot/images/js/learn-function-3.jpg">
</figure>
<p>透過函數關鍵字 <em>function</em> 告知解譯器我們要宣告一個函數，接著給予函數名稱，名稱後方須加上小括號 <em>( )</em>。負責執行工作的敘述句則放置於程式區段內，也就是由大括號 <em>{ }</em> 包含的範圍。如此一來，一個可以被重複使用的函數便誕生了。宣告完函數後，我們只要直接調用函數名稱就能執行函數大括號內的所有敘述句。例如：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">// 宣告函數
function fName() {
    document.write('Hello world!');
}

// 呼叫函數
fName();</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<div class="text-codepen">
    <code>
        <p data-height="360" data-theme-id="0" data-slug-hash="mpzmMO" data-default-tab="js,result" data-user="itrong" data-embed-version="2" data-pen-title="JS-learn: example21" class="codepen">See the Pen <a href="https://codepen.io/itrong/pen/mpzmMO/">JS-learn: example21</a> by Trong (<a href="https://codepen.io/itrong">@itrong</a>) on <a href="https://codepen.io">CodePen</a>.</p>
    </code>
</div>
<p>實作上面的練習範例，會發現函數尚未被宣告之前，就已經先被呼叫，但最後依然可以正常執行其敘述句...此乃因為解譯器會先讀取完整份 JavaScript 腳本，再依序執行每一行描述，故呼叫函數的程式碼寫於宣告之前「乍看」【註】是可行的。只是一般來說，「先宣告後呼叫」仍是比較正常且良好的習慣。<br>【註】：函數宣告有幾種方式，其中有一種寫法，若函數呼叫搶在宣告之前，將會被告知未定義（<em>undefined</em>）致使呼叫出錯。</p>
<p><br></p>

<h4>宣告一個「需要資訊的函數」</h4>
<p>以下先列舉一則模擬情境──有間主打彩繪手機殼的商店，提供顧客客製化彩繪的服務，依據上門顧客提供的樣本，來產出符合顧客需求的彩繪手機殼，此乃店家接單製作的標準作業流程。假如今天要用 JavaScript 表示，我們可以將「從接收訂單到將成品提交給顧客」這一連串的過程寫成函數，例如：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">function 訂單() {
    接收顧客需求;
    進行手機殼彩繪作業;
    將手機殼交給顧客;
}

訂單();
訂單();
...
訂單();</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>聰明如你想必已經察覺到不對勁──是的，儘管函數可以允許我們在不同的程式碼區域重複呼叫並執行其內部的程式碼，但並非所有顧客的需求都一樣，也許有的顧客主題是花卉、寵物、動漫...等，這種情況下，我們需要為函數代入一個參數，此參數用來傳遞顧客客製化訂單的需求。</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">function 訂單(參數) {
    接收顧客 參數 需求;
    進行手機殼彩繪作業;
    將手機殼交給顧客;
}

訂單(羽蝶蘭);
訂單(我愛一條柴);
...
訂單(初音未來);</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>如此一來，就能在不同區域呼叫函數時，傳入各別的參數值給函數執行程式了。</p>
<p>看完文字舉例，我們將中文敘述轉換成程式碼，看看函數是如何表示的：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">function getArea(width, height) {
    return width * height;
}</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>此函數範例要展示的重點有二，一是要表達 <em>width</em>、<em>height</em> 為參數，其在函數中使用方式視同變數的概念。二則是函數設定的傳遞參數可不止一個。當我們要呼叫這個函數時，會在呼叫它的小括號內傳入要使用的值，例如：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">getArea(30, 60);</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>於函數呼叫的小括弧內傳入的值，我們稱之為「引數」，它們可以用「數值」或「變數」的方式進行傳遞。數值的部分如同上方的範例，而變數傳遞的方式如下：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">itemW = 30;
itemH = 60;
getArea(itemW, itemH);</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>由此可見，函數呼叫裡的值不一定要是確定的數值，透過變數傳遞至對應的參數也能完成相同的工作。</p>
<div class="text-codepen">
    <code>
        <p data-height="360" data-theme-id="0" data-slug-hash="PEyJbW" data-default-tab="js,result" data-user="itrong" data-embed-version="2" data-pen-title="JS-learn: example22" class="codepen">See the Pen <a href="https://codepen.io/itrong/pen/PEyJbW/">JS-learn: example22</a> by Trong (<a href="https://codepen.io/itrong">@itrong</a>) on <a href="https://codepen.io">CodePen</a>.</p>
    </code>
</div>
<p><br></p>

<h4>參數與引數的不同</h4>
<p>參數是指函數在宣告時所使用的字彙（例如：<em>width</em>、<em>height</em>）；引數則是指傳遞給函數進行運算的數值。</p>
<p><br></p>

<h2 id="act3">函數的回傳值──return</h2>
<p>在大多數的函數中，我們可以看到其最末行使用 <em>return</em> 敘述句，例如：</p>
<div class="text-code is-js">
<pre class="text-pre"><code class="javascript">function calculateArea(width, height) {
    var area = width * height;
    return area;
}</code></pre>
<button class="text-copy" data-text="COPY" data-text-copied="COPIED">
    <span>COPY</span>
</button>
</div>
<p>在 <em>calculateArea</em> 此函數中，宣告了一個名為 <em>area</em> 的變數，以儲存運算（<em>width * height</em>）的結果。<em>return</em> 是用來回傳一個值給最初呼叫此函式的程式碼，一旦 <em>return</em> 被執行，解譯器便會跳出函數，回到當初呼叫此函數的敘述句位置。</p>
<div class="text-codepen">
    <code>
        <p class="codepen" data-height="360" data-theme-id="dark" data-default-tab="js,result" data-user="itrong" data-slug-hash="ZEQeXQZ" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="JS-learn: function 1">
        <span>See the Pen <a href="https://codepen.io/itrong/pen/ZEQeXQZ">
        JS-learn: function 1</a> by Trong (<a href="https://codepen.io/itrong">@itrong</a>)
        on <a href="https://codepen.io">CodePen</a>.</span>
        </p>
    </code>
</div>
<p>上面實例練習中我們分別呼叫了 <em>calculateArea</em> 函數兩次，並傳遞不同的引數給函數執行運算，接著透過 <em>return</em> 將運算結果的值回傳給我們另外宣告的變數（<em>item1</em>、<em>item2</em>）。</p>
<p>稍早有提過，若函數一旦讀到 <em>return</em> 並會立刻跳出，假如其後續還有其他敘述句都將不會被執行。請見下例：</p>
<div class="text-codepen">
    <code>
        <p data-height="360" data-theme-id="0" data-slug-hash="QaZOQX" data-default-tab="js,result" data-user="itrong" data-embed-version="2" data-pen-title="JS-learn: example23" class="codepen">See the Pen <a href="https://codepen.io/itrong/pen/QaZOQX/">JS-learn: example23</a> by Trong (<a href="https://codepen.io/itrong">@itrong</a>) on <a href="https://codepen.io">CodePen</a>.</p>
    </code>
</div>
<p>由於函數內的 <em>document.write(t);</em> 被寫在 <em>return</em> 之後，所以不會被執行。</p>




<p><br></p>











<!-- 參考資料 -->
<div class="text-refer">
    <ul>
        <li><a href="https://www.books.com.tw/products/0010744702" target="_blank">《JavaScript & JQuery：網站互動設計程式進化之道》</a></li>
        <li><a href="http://www.kangting.tw/2013/12/javascript-7.html" target="_blank">JavaScript 快速入門（7/10）－ 函式</a></li>
        <li><a href="https://www.fooish.com/javascript/function.html" target="_blank">JavaScript Function (函數)</a></li>
    </ul>
</div>
<!-- Content end -->
                </div>
                @@include("../_aside.html", { "js": true, "pages": true })
            </section>
        </main>
        @@include("../_footer.html")
    </article>
    @@include("../_js.html", { "inside": true })
</body>
</html>